## template: jinja
#cloud-config

write_files:
-   path: 'C:\test_append.ps1'
    owner: root:root
    permissions: '0640'
    content: |
      ---
      apiVersion: kubeadm.k8s.io/v1beta1
      discovery:
        bootstrapToken:
          apiServerEndpoint: capi-quickstart-apiserver-748134055.us-east-1.elb.amazonaws.com:6443
          caCertHashes:
          - sha256:1234
          token: some_token
          unsafeSkipCAVerification: false
      kind: JoinConfiguration
      nodeRegistration:
        kubeletExtraArgs:
          cloud-provider: aws
        name: '{{ ds.meta_data.hostname }}'